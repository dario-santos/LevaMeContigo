package com.dariosantos.wordsdontcomeeasy;


import androidx.appcompat.app.AppCompatActivity;

import android.content.ContentValues;
import android.content.Intent;
import android.database.Cursor;
import android.database.sqlite.SQLiteDatabase;
import android.os.Bundle;
import android.view.View;
import android.widget.Button;
import android.widget.ImageButton;
import android.widget.TextView;

import java.io.BufferedReader;
import java.io.InputStream;
import java.io.InputStreamReader;
import java.util.ArrayList;
import java.util.Collections;

// Todo: Colocar o link da aplicação no share
public class Maratona extends AppCompatActivity
{
    private SQLiteDatabase oSQLiteDB;
    private AjudanteParaAbrirBD oAPABD;
    private int numOfWords = 997559;

    private String userName = "";

    private int previusBestScore = 0;
    private int previusExp = 0;

    private ArrayList<Button> buttons = new ArrayList<>();
    private String correctWord = "";
    private int letterIndex = 0;
    private int currentScore = 0;
    private int currentTries = 0;
    private int numberOfwords = 0;

    @Override
    protected void onCreate(Bundle savedInstanceState)
    {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_maratona);

        Intent intent = getIntent();
        userName = intent.getStringExtra("name");

        oAPABD = new AjudanteParaAbrirBD(this);
        oSQLiteDB = oAPABD.getWritableDatabase();

        Cursor oCursor = oSQLiteDB.query(AjudanteParaAbrirBD.TABLE_USER,
                new String[]{AjudanteParaAbrirBD.USER_EXP, AjudanteParaAbrirBD.USER_BESTSCORE}, "Name = ?", new String[]{userName}
                ,null, null, null, null);

        if(oCursor.moveToFirst())
        {
            previusExp = oCursor.getInt(0);
            previusBestScore = oCursor.getInt(1);
        }

        // Guarda os botões para guardar na lista
        Button button1 = findViewById(R.id.maratona_button1);
        Button button2 = findViewById(R.id.maratona_button2);
        Button button3 = findViewById(R.id.maratona_button3);
        Button button4 = findViewById(R.id.maratona_button4);
        Button button5 = findViewById(R.id.maratona_button5);

        buttons.add(button1);
        buttons.add(button2);
        buttons.add(button3);
        buttons.add(button4);
        buttons.add(button5);

        // Dificuldade do jogo
        numOfWords = GetDifficulty(previusExp);
        // Inicia o Jogo
        GetNextLevel();
    }

    @Override
    protected void onResume()
    {
        super.onResume();
        oSQLiteDB = oAPABD.getWritableDatabase();
    }

    @Override
    protected void onPause()
    {
        C